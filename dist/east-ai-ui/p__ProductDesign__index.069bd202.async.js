"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[911],{65083:function(G,P,t){t.r(P);var v=t(15009),p=t.n(v),y=t(99289),b=t.n(y),T=t(5574),d=t.n(T),O=t(92296),Z=t(79090),f=t(51042),I=t(41288),x=t(35312),C=t(9361),m=t(2453),o=t(10932),u=t(71230),_=t(15746),r=t(53025),a=t(56518),H=t(62136),z=t(34596),j=t(8925),F=t(9991),E=t(67294),e=t(85893),w=function(){var l=(0,x.useIntl)(),N=C.Z.useToken(),$=N.token,V=(0,E.useState)([]),R=d()(V,2),J=R[0],Y=R[1],Q=(0,E.useState)(!1),L=d()(Q,2),U=L[0],D=L[1],X=(0,E.useState)(),B=d()(X,2),M=B[0],k=B[1],q=(0,E.useState)("product_design"),A=d()(q,2),c=A[0],ge=A[1],ee=(0,E.useState)(512),W=d()(ee,2),te=W[0],ae=W[1],se=(0,E.useState)(512),K=d()(se,2),ne=K[0],re=K[1],_e=function(){var n=b()(p()().mark(function s(i){var h;return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return D(!0),i.prompt="3D product render, ".concat(i.prompt,", finely detailed, purism, ue 5, a computer rendering, minimalism, octane render, 4k"),M&&M.length>1&&(i.input_image=M),i.width||(i.width=te),i.height||(i.height=ne),g.next=7,(0,O.uu)(i);case 7:if(h=g.sent,!h.error){g.next=12;break}return m.ZP.error(h.error),D(!1),g.abrupt("return");case 12:Y(h.images),D(!1);case 14:case"end":return g.stop()}},s)}));return function(i){return n.apply(this,arguments)}}(),ie=function(s){console.log("Failed:",s)},ue=["euler_a","eular","heun","lms","dpm2","dpm2_a","ddim"],le=["enhance","anime","photographic","digital-art","comic-book","fantasy-art","analog-film","neon-punk","isometric","low-poly","origami","line-art","craft-clay","cinematic","3d-model","pixel-art"],S={"512 x 512":[512,512],"768 x 768":[768,768],"1024 x 1024":[1024,1024],"576 x 384":[576,384],"640 x 384":[640,384],"704 x 384":[704,384],"1152 x 768":[1152,768],"1173 x 640":[1173,640],"320 x 704":[320,704],"448 x 576":[448,576],"768 x 1152":[768,1152]},oe={prompt:"futuristic armchair",negative_prompt:"EasyNegative, (worst quality:2), (low quality:2), (normal quality:2), lowres, ((monochrome)), ((grayscale)), cropped, text, jpeg artifacts, signature, watermark, username, sketch, cartoon, drawing, anime, duplicate, blurry, semi-realistic, out of frame, ugly, deformed",steps:30,sampler:"dpm2_a",seed:-1,height:512,width:512,count:1,model_id:"product_design",style_preset:"3d-model"},de=function(s){if(s.file.status==="uploading"){D(!0);return}s.file.status==="done"&&(s.file.response.success?k(s.file.response.data):m.ZP.error(s.file.response.message),D(!1))},me=function(s){var i=s.type==="image/jpeg"||s.type==="image/png"||s.type==="image/webp";i||m.ZP.error("You can only upload JPG/PNG file!");var h=s.size/1024/1024<5;return h||m.ZP.error("Image must smaller than 5MB!"),i&&h},pe=function(s){var i=S[s];ae(i[0]),re(i[1])},ce=(0,e.jsx)("div",{children:U?(0,e.jsx)(Z.Z,{}):(0,e.jsx)(o.ZP,{icon:(0,e.jsx)(f.Z,{}),children:l.formatMessage({id:"pages.common.buttonUpload"})})});return(0,e.jsx)(I._z,{waterMarkProps:{content:""},children:(0,e.jsx)("div",{style:{color:$.colorTextHeading},children:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(_.Z,{span:8,children:(0,e.jsxs)(r.Z,{name:"basic",onFinish:_e,onFinishFailed:ie,autoComplete:"off",layout:"vertical",initialValues:oe,children:[(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.modelId.title"}),name:"model_id",children:(0,e.jsx)(a.Z,{disabled:!0,children:(0,e.jsx)(a.Z.Option,{value:"product_design",children:l.formatMessage({id:"pages.productDesign.model.realityStyle"})})})}),c==="product_design"?(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.inputImage.title"}),name:"input_image",valuePropName:"fieldList",children:(0,e.jsx)(H.Z,{name:"file",action:"/api/upload",className:"avatar-uploader",onChange:de,beforeUpload:me,maxCount:1,showUploadList:!1,children:M?(0,e.jsx)("img",{src:"/api/s3-image/"+M,alt:"product image",style:{maxHeight:320,maxWidth:320}}):ce})}):null,(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.prompt.title"}),name:"prompt",rules:[{required:!0}],children:(0,e.jsx)(z.Z.TextArea,{showCount:!0,maxLength:500,allowClear:!0,style:{height:120}})}),(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.nprompt.title"}),name:"negative_prompt",rules:[{required:!0}],children:(0,e.jsx)(z.Z.TextArea,{showCount:!0,maxLength:500,allowClear:!0,style:{height:120}})}),(0,e.jsxs)(u.Z,{children:[c==="bedrock_titan"?(0,e.jsx)(_.Z,{span:16,children:(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.size.title"}),children:(0,e.jsx)(a.Z,{onChange:pe,children:Object.keys(S).map(function(n){return(0,e.jsx)(a.Z.Option,{value:n},n)})})})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{span:8,children:(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.width.title"}),name:"width",rules:[{required:!0}],children:(0,e.jsx)(j.Z,{min:128,max:1024})})}),(0,e.jsx)(_.Z,{span:8,children:(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.height.title"}),name:"height",rules:[{required:!0}],children:(0,e.jsx)(j.Z,{min:128,max:1024})})})]}),(0,e.jsxs)(_.Z,{span:8,children:[c==="product_design"||c==="bedrock_titan"?(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.count.title"}),name:"count",rules:[{required:!0}],children:(0,e.jsx)(j.Z,{min:1,max:4})}):null,c==="bedrock_sdxl"?(0,e.jsx)(r.Z.Item,{label:l.formatMessage({id:"pages.productDesign.stylePreset.title"}),name:"style_preset",children:(0,e.jsx)(a.Z,{children:le.map(function(n){return(0,e.jsx)(a.Z.Option,{value:n,children:n},n)})})}):null]})]}),(0,e.jsx)(u.Z,{style:{display:"none"},children:(0,e.jsxs)(_.Z,{span:24,children:[(0,e.jsx)(r.Z.Item,{label:"\u79CD\u5B50",name:"seed",rules:[{required:!0,message:"\u79CD\u5B50!"}],children:(0,e.jsx)(j.Z,{})}),(0,e.jsx)(r.Z.Item,{label:"\u91C7\u6837\u5668",name:"sampler",rules:[{required:!0,message:"\u91C7\u6837\u5668!"}],children:(0,e.jsx)(a.Z,{children:ue.map(function(n){return(0,e.jsx)(a.Z.Option,{value:n,children:n},n)})})}),(0,e.jsx)(r.Z.Item,{label:"\u6B65\u6570",name:"steps",rules:[{required:!0,message:"\u6B65\u6570!"}],children:(0,e.jsx)(j.Z,{min:5,max:50})})]})}),(0,e.jsx)(r.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(o.ZP,{type:"primary",htmlType:"submit",disabled:U,children:l.formatMessage({id:"pages.common.buttonBeginGen"})})})]})}),(0,e.jsx)(_.Z,{span:1}),(0,e.jsx)(_.Z,{span:14,children:(0,e.jsxs)("div",{style:{width:"100%",borderRadius:4,margin:8},children:[U?(0,e.jsx)("div",{children:(0,e.jsx)(Z.Z,{})}):null,J.map(function(n,s){return(0,e.jsx)(F.Z,{src:"data:image/png;base64,"+n,style:{maxWidth:320,maxHeight:320,border:"solid #fff 1px",margin:"10px",float:"left"}},s)})]})})]})})})};P.default=w},92296:function(G,P,t){t.d(P,{fN:function(){return C},uu:function(){return I}});var v=t(15009),p=t.n(v),y=t(97857),b=t.n(y),T=t(99289),d=t.n(T),O=t(35312);function Z(o,u){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function o(u,_){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(_objectSpread({},_||{})),a.abrupt("return",request("/api/write-marketing-text",_objectSpread({method:"POST",data:u},_||{})));case 2:case"end":return a.stop()}},o)})),f.apply(this,arguments)}function I(o,u){return x.apply(this,arguments)}function x(){return x=d()(p()().mark(function o(u,_){return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,O.request)("/api/product-design",b()({method:"POST",data:u},_||{})));case 1:case"end":return a.stop()}},o)})),x.apply(this,arguments)}function C(o,u){return m.apply(this,arguments)}function m(){return m=d()(p()().mark(function o(u,_){return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,O.request)("/api/inpaint",b()({method:"POST",data:u},_||{})));case 1:case"end":return a.stop()}},o)})),m.apply(this,arguments)}}}]);
