"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{2650:function(Z,D,s){s.r(D);var b=s(15009),l=s.n(b),M=s(99289),p=s.n(M),v=s(5574),d=s.n(v),c=s(92296),x=s(79090),E=s(51042),C=s(90930),h=s(9361),P=s(97029),o=s(2453),u=s(71230),r=s(15746),a=s(5298),i=s(31863),t=s(2519),B=s(66428),A=s(73360),R=s(3247),y=s(67294),e=s(85893),L=function(){var W=h.Z.useToken(),K=W.token,S=(0,y.useState)([]),T=d()(S,2),w=T[0],G=T[1],H=(0,y.useState)(!1),I=d()(H,2),U=I[0],O=I[1],N=(0,y.useState)(),F=d()(N,2),g=F[0],$=F[1],ee=function(_){return _.replace("s3://east-ai-workshop","https://d1onssyrnp1eaq.cloudfront.net")},z=function(){var n=p()(l()().mark(function _(m){var j;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return O(!0),g&&g.length>1&&(m.input_image=g),f.next=4,(0,c.fN)(m);case 4:j=f.sent,G(j.images),O(!1);case 7:case"end":return f.stop()}},_)}));return function(m){return n.apply(this,arguments)}}(),V=function(_){console.log("Failed:",_)},J=["euler_a","eular","heun","lms","dpm2","dpm2_a","ddim"],Y={negative_prompt:"(deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime:1.4), text, close up, cropped, out of frame, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, disfigured, gross proportions",steps:30,sampler:"ddim",seed:-1,count:1,model_id:"product_design",sam_prompt:""},Q=(0,e.jsx)("div",{children:U?(0,e.jsx)(x.Z,{}):(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(E.Z,{}),children:"\u4E0A\u4F20"})}),X=function(_){if(_.file.status==="uploading"){O(!0);return}_.file.status==="done"&&(_.file.response.success?$(_.file.response.data):o.ZP.error(_.file.response.message),O(!1))},k=function(_){var m=_.type==="image/jpeg"||_.type==="image/png"||_.type==="image/webp";m||o.ZP.error("You can only upload JPG/PNG file!");var j=_.size/1024/1024<5;return j||o.ZP.error("Image must smaller than 5MB!"),m&&j};return(0,e.jsx)(C._z,{waterMarkProps:{content:""},children:(0,e.jsx)("div",{style:{color:K.colorTextHeading},children:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(r.Z,{span:8,children:(0,e.jsxs)(a.Z,{name:"basic",onFinish:z,onFinishFailed:V,autoComplete:"off",layout:"vertical",initialValues:Y,children:[(0,e.jsx)(a.Z.Item,{label:"\u6A21\u578B\u9009\u62E9",name:"model_id",children:(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(i.Z.Option,{value:"product_design",children:"\u62A0\u56FE\u6E32\u67D3\u6A21\u578B"}),(0,e.jsx)(i.Z.Option,{value:"product_inpaint",children:"\u5907\u7528\u6A21\u578B"})]})}),(0,e.jsx)(a.Z.Item,{label:"\u4EA7\u54C1\u56FE\u7247",name:"input_image",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u539F\u59CB\u56FE\u7247!"}],valuePropName:"fieldList",children:(0,e.jsx)(t.Z,{name:"file",action:"/api/upload",className:"avatar-uploader",showUploadList:!1,onChange:X,beforeUpload:k,maxCount:1,children:g?(0,e.jsx)("img",{src:"/api/s3-image/"+g,alt:"product image",style:{maxHeight:320,maxWidth:320}}):Q})}),(0,e.jsx)(a.Z.Item,{label:"\u4EA7\u54C1\u63CF\u8FF0",name:"sam_prompt",rules:[{required:!0,message:"\u8BF7\u63CF\u8FF0\u60A8\u4E0A\u4F20\u56FE\u7247\u7684\u4E2D\u9700\u8981\u4FDD\u7559\u7684\u5185\u5BB9!"}],children:(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u63CF\u8FF0\u60A8\u4E0A\u4F20\u56FE\u7247\u7684\u4E2D\u9700\u8981\u4FDD\u7559\u7684\u5185\u5BB9!"})}),(0,e.jsx)(a.Z.Item,{label:"\u80CC\u666F\u63D0\u793A\u8BCD",name:"prompt",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u91CD\u7ED8\u5185\u5BB9!"}],children:(0,e.jsx)(B.Z.TextArea,{showCount:!0,maxLength:500,placeholder:"\u9664\u4E86\u4FDD\u7559\u7684\u5185\u5BB9\uFF0C\u5176\u4ED6\u5730\u65B9\u60A8\u60F3\u753B\u4EC0\u4E48\uFF1F",allowClear:!0,style:{height:120}})}),(0,e.jsx)(a.Z.Item,{label:"\u907F\u514D\u51FA\u73B0\u5728\u753B\u9762\u4E2D\u7684\u5185\u5BB9",name:"negative_prompt",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53CD\u5411\u63D0\u793A\u8BCD!"}],children:(0,e.jsx)(B.Z.TextArea,{showCount:!0,maxLength:500,placeholder:"\u8BF7\u8F93\u5165\u60A8\u4E0D\u60F3\u5728\u91CD\u4F1A\u533A\u57DF\u4E2D\u51FA\u73B0\u7684\u5185\u5BB9",allowClear:!0,style:{height:120}})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(a.Z.Item,{label:"\u56FE\u7247\u6570\u91CF",name:"count",rules:[{required:!0,message:"\u56FE\u7247\u6570\u91CF!"}],children:(0,e.jsx)(A.Z,{min:1,max:4})})})}),(0,e.jsx)(u.Z,{style:{display:"none"},children:(0,e.jsxs)(r.Z,{span:24,children:[(0,e.jsx)(a.Z.Item,{label:"\u79CD\u5B50",name:"seed",rules:[{required:!0,message:"\u79CD\u5B50!"}],children:(0,e.jsx)(A.Z,{})}),(0,e.jsx)(a.Z.Item,{label:"\u91C7\u6837\u5668",name:"sampler",rules:[{required:!0,message:"\u91C7\u6837\u5668!"}],children:(0,e.jsx)(i.Z,{children:J.map(function(n){return(0,e.jsx)(i.Z.Option,{value:n,children:n},n)})})}),(0,e.jsx)(a.Z.Item,{label:"\u6B65\u6570",name:"steps",rules:[{required:!0,message:"\u6B65\u6570!"}],children:(0,e.jsx)(A.Z,{min:5,max:50})})]})}),(0,e.jsx)(a.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(P.ZP,{type:"primary",htmlType:"submit",children:"\u5F00\u59CB\u751F\u6210"})})]})}),(0,e.jsx)(r.Z,{span:1}),(0,e.jsx)(r.Z,{span:14,children:(0,e.jsxs)("div",{style:{width:"100%",borderRadius:4,margin:8},children:[U?(0,e.jsx)("div",{children:(0,e.jsx)(x.Z,{})}):null,w.map(function(n,_){return(0,e.jsx)(R.Z,{src:"data:image/png;base64,"+n,style:{maxWidth:320,maxHeight:320,border:"solid #fff 1px",margin:"10px",float:"left"}},_)})]})})]})})})};D.default=L},92296:function(Z,D,s){s.d(D,{fN:function(){return P},uu:function(){return C}});var b=s(15009),l=s.n(b),M=s(97857),p=s.n(M),v=s(99289),d=s.n(v),c=s(35312);function x(u,r){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function u(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(_objectSpread({},a||{})),t.abrupt("return",request("/api/write-marketing-text",_objectSpread({method:"POST",data:r},a||{})));case 2:case"end":return t.stop()}},u)})),E.apply(this,arguments)}function C(u,r){return h.apply(this,arguments)}function h(){return h=d()(l()().mark(function u(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),r.model_id!="bedrock_sdxl"){t.next=3;break}return t.abrupt("return",(0,c.request)("/api/bedrock-product-design",p()({method:"POST",data:r},a||{})));case 3:return t.abrupt("return",(0,c.request)("/api/product-design",p()({method:"POST",data:r},a||{})));case 4:case"end":return t.stop()}},u)})),h.apply(this,arguments)}function P(u,r){return o.apply(this,arguments)}function o(){return o=d()(l()().mark(function u(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/inpaint",p()({method:"POST",data:r},a||{})));case 1:case"end":return t.stop()}},u)})),o.apply(this,arguments)}}}]);
