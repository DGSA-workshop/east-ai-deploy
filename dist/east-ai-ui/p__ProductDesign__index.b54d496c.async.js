"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[911],{65083:function(G,P,t){t.r(P);var b=t(15009),p=t.n(b),y=t(99289),O=t.n(y),T=t(5574),d=t.n(T),v=t(92296),Z=t(79090),E=t(51042),I=t(90930),f=t(35312),C=t(9361),m=t(2453),u=t(10932),l=t(71230),n=t(15746),_=t(53025),s=t(56518),F=t(62136),A=t(34596),x=t(8925),w=t(9991),D=t(67294),e=t(85893),z=function(){var o=(0,f.useIntl)(),N=C.Z.useToken(),$=N.token,H=(0,D.useState)([]),W=d()(H,2),V=W[0],J=W[1],Y=(0,D.useState)(!1),S=d()(Y,2),U=S[0],j=S[1],Q=(0,D.useState)(),R=d()(Q,2),M=R[0],X=R[1],q=(0,D.useState)("product_design"),L=d()(q,2),h=L[0],ge=L[1],ee=(0,D.useState)(512),B=d()(ee,2),te=B[0],se=B[1],ae=(0,D.useState)(512),K=d()(ae,2),re=K[0],_e=K[1],ne=function(){var r=O()(p()().mark(function a(i){var c;return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return j(!0),i.prompt="3D product render, ".concat(i.prompt,", finely detailed, purism, ue 5, a computer rendering, minimalism, octane render, 4k"),M&&M.length>1&&(i.input_image=M),i.width||(i.width=te),i.height||(i.height=re),g.next=7,(0,v.uu)(i);case 7:if(c=g.sent,!c.error){g.next=12;break}return m.ZP.error(c.error),j(!1),g.abrupt("return");case 12:J(c.images),j(!1);case 14:case"end":return g.stop()}},a)}));return function(i){return r.apply(this,arguments)}}(),ie=function(a){console.log("Failed:",a)},le=["euler_a","eular","heun","lms","dpm2","dpm2_a","ddim"],oe=["enhance","anime","photographic","digital-art","comic-book","fantasy-art","analog-film","neon-punk","isometric","low-poly","origami","line-art","craft-clay","cinematic","3d-model","pixel-art"],k={"512 x 512":[512,512],"768 x 768":[768,768],"1024 x 1024":[1024,1024],"576 x 384":[576,384],"640 x 384":[640,384],"704 x 384":[704,384],"1152 x 768":[1152,768],"1173 x 640":[1173,640],"320 x 704":[320,704],"448 x 576":[448,576],"768 x 1152":[768,1152]},ue={prompt:"futuristic armchair",negative_prompt:"EasyNegative, (worst quality:2), (low quality:2), (normal quality:2), lowres, ((monochrome)), ((grayscale)), cropped, text, jpeg artifacts, signature, watermark, username, sketch, cartoon, drawing, anime, duplicate, blurry, semi-realistic, out of frame, ugly, deformed",steps:30,sampler:"dpm2_a",seed:-1,height:512,width:512,count:1,model_id:"product_design",style_preset:"3d-model"},de=function(a){if(a.file.status==="uploading"){j(!0);return}a.file.status==="done"&&(a.file.response.success?X(a.file.response.data):m.ZP.error(a.file.response.message),j(!1))},me=function(a){var i=a.type==="image/jpeg"||a.type==="image/png"||a.type==="image/webp";i||m.ZP.error("You can only upload JPG/PNG file!");var c=a.size/1024/1024<5;return c||m.ZP.error("Image must smaller than 5MB!"),i&&c},pe=function(a){var i=k[a];se(i[0]),_e(i[1])},he=(0,e.jsx)("div",{children:U?(0,e.jsx)(Z.Z,{}):(0,e.jsx)(u.ZP,{icon:(0,e.jsx)(E.Z,{}),children:o.formatMessage({id:"pages.common.buttonUpload"})})});return(0,e.jsx)(I._z,{waterMarkProps:{content:""},children:(0,e.jsx)("div",{style:{color:$.colorTextHeading},children:(0,e.jsxs)(l.Z,{children:[(0,e.jsx)(n.Z,{span:8,children:(0,e.jsxs)(_.Z,{name:"basic",onFinish:ne,onFinishFailed:ie,autoComplete:"off",layout:"vertical",initialValues:ue,children:[(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.modelId.title"}),name:"model_id",children:(0,e.jsx)(s.Z,{disabled:!0,children:(0,e.jsx)(s.Z.Option,{value:"product_design",children:o.formatMessage({id:"pages.productDesign.model.realityStyle"})})})}),h==="product_design"?(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.inputImage.title"}),name:"input_image",valuePropName:"fieldList",children:(0,e.jsx)(F.Z,{name:"file",action:"/api/upload",className:"avatar-uploader",onChange:de,beforeUpload:me,maxCount:1,showUploadList:!1,children:M?(0,e.jsx)("img",{src:"/api/s3-image/"+M,alt:"product image",style:{maxHeight:320,maxWidth:320}}):he})}):null,(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.prompt.title"}),name:"prompt",rules:[{required:!0}],children:(0,e.jsx)(A.Z.TextArea,{showCount:!0,maxLength:500,allowClear:!0,style:{height:120}})}),(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.nprompt.title"}),name:"negative_prompt",rules:[{required:!0}],children:(0,e.jsx)(A.Z.TextArea,{showCount:!0,maxLength:500,allowClear:!0,style:{height:120}})}),(0,e.jsxs)(l.Z,{children:[h==="bedrock_titan"?(0,e.jsx)(n.Z,{span:16,children:(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.size.title"}),children:(0,e.jsx)(s.Z,{onChange:pe,children:Object.keys(k).map(function(r){return(0,e.jsx)(s.Z.Option,{value:r},r)})})})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.Z,{span:8,children:(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.width.title"}),name:"width",rules:[{required:!0}],children:(0,e.jsx)(x.Z,{min:128,max:1024})})}),(0,e.jsx)(n.Z,{span:8,children:(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.height.title"}),name:"height",rules:[{required:!0}],children:(0,e.jsx)(x.Z,{min:128,max:1024})})})]}),(0,e.jsxs)(n.Z,{span:8,children:[h==="product_design"||h==="bedrock_titan"?(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.count.title"}),name:"count",rules:[{required:!0}],children:(0,e.jsx)(x.Z,{min:1,max:4})}):null,h==="bedrock_sdxl"?(0,e.jsx)(_.Z.Item,{label:o.formatMessage({id:"pages.productDesign.stylePreset.title"}),name:"style_preset",children:(0,e.jsx)(s.Z,{children:oe.map(function(r){return(0,e.jsx)(s.Z.Option,{value:r,children:r},r)})})}):null]})]}),(0,e.jsx)(l.Z,{style:{display:"none"},children:(0,e.jsxs)(n.Z,{span:24,children:[(0,e.jsx)(_.Z.Item,{label:"\u79CD\u5B50",name:"seed",rules:[{required:!0,message:"\u79CD\u5B50!"}],children:(0,e.jsx)(x.Z,{})}),(0,e.jsx)(_.Z.Item,{label:"\u91C7\u6837\u5668",name:"sampler",rules:[{required:!0,message:"\u91C7\u6837\u5668!"}],children:(0,e.jsx)(s.Z,{children:le.map(function(r){return(0,e.jsx)(s.Z.Option,{value:r,children:r},r)})})}),(0,e.jsx)(_.Z.Item,{label:"\u6B65\u6570",name:"steps",rules:[{required:!0,message:"\u6B65\u6570!"}],children:(0,e.jsx)(x.Z,{min:5,max:50})})]})}),(0,e.jsx)(_.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(u.ZP,{type:"primary",htmlType:"submit",disabled:U,children:o.formatMessage({id:"pages.common.buttonBeginGen"})})})]})}),(0,e.jsx)(n.Z,{span:1}),(0,e.jsx)(n.Z,{span:14,children:(0,e.jsxs)("div",{style:{width:"100%",borderRadius:4,margin:8},children:[U?(0,e.jsx)("div",{children:(0,e.jsx)(Z.Z,{})}):null,V.map(function(r,a){return(0,e.jsx)(w.Z,{src:"data:image/png;base64,"+r,style:{maxWidth:320,maxHeight:320,border:"solid #fff 1px",margin:"10px",float:"left"}},a)})]})})]})})})};P.default=z},92296:function(G,P,t){t.d(P,{fN:function(){return C},uu:function(){return I}});var b=t(15009),p=t.n(b),y=t(97857),O=t.n(y),T=t(99289),d=t.n(T),v=t(35312);function Z(u,l){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function u(l,n){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(_objectSpread({},n||{})),s.abrupt("return",request("/api/write-marketing-text",_objectSpread({method:"POST",data:l},n||{})));case 2:case"end":return s.stop()}},u)})),E.apply(this,arguments)}function I(u,l){return f.apply(this,arguments)}function f(){return f=d()(p()().mark(function u(l,n){return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.request)("/api/product-design",O()({method:"POST",data:l},n||{})));case 1:case"end":return s.stop()}},u)})),f.apply(this,arguments)}function C(u,l){return m.apply(this,arguments)}function m(){return m=d()(p()().mark(function u(l,n){return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.request)("/api/inpaint",O()({method:"POST",data:l},n||{})));case 1:case"end":return s.stop()}},u)})),m.apply(this,arguments)}}}]);
