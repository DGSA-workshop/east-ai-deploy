"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[461],{79090:function($,h,t){var g=t(1413),d=t(67294),j=t(15294),p=t(91146),x=function(Z,y){return d.createElement(p.Z,(0,g.Z)((0,g.Z)({},Z),{},{ref:y,icon:j.Z}))};x.displayName="LoadingOutlined",h.Z=d.forwardRef(x)},19230:function($,h,t){t.r(h),t.d(h,{default:function(){return te}});var g=t(15009),d=t.n(g),j=t(99289),p=t.n(j),x=t(5574),l=t.n(x),Z=t(11774),y=t(35312),G=t(9361),J=t(45360),c=t(71230),a=t(15746),f=t(52445),Q=t(96365),X=t(55742),Y=t(71577),m=t(7134),o=t(67294),E=t(87547),M=t(1413),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 328a60 60 0 10120 0 60 60 0 10-120 0zM852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-32 660H204V128h616v596zM604 328a60 60 0 10120 0 60 60 0 10-120 0zm250.2 556H169.8c-16.5 0-29.8 14.3-29.8 32v36c0 4.4 3.3 8 7.4 8h729.1c4.1 0 7.4-3.6 7.4-8v-36c.1-17.7-13.2-32-29.7-32zM664 508H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"robot",theme:"outlined"},k=w,q=t(91146),R=function(C,F){return o.createElement(q.Z,(0,M.Z)((0,M.Z)({},C),{},{ref:F,icon:k}))};R.displayName="RobotOutlined";var A=o.forwardRef(R),_=t(79090),e=t(85893),ee=function(){var C=G.Z.useToken(),F=C.token,ae=(0,y.useModel)("@@initialState"),je=ae.initialState,se=(0,o.useState)("redbook"),b=l()(se,2),oe=b[0],re=b[1],le=(0,o.useState)([]),T=l()(le,2),S=T[0],P=T[1],ie=(0,o.useState)(""),z=l()(ie,2),B=z[0],L=z[1],ue=(0,o.useState)(""),D=l()(ue,2),O=D[0],I=D[1],de=(0,o.useState)(!1),H=l()(de,2),W=H[0],U=H[1],ce=J.ZP.useMessage(),K=l()(ce,2),pe=K[0],Ze=K[1],r=(0,o.useRef)(null);(0,o.useEffect)(function(){var s=window.location,n;s.protocol==="https:"?n="wss:":n="ws:",n+="//"+s.host,n+="/api/chat-bot",console.log(n),r.current=new WebSocket(n),r.current.onopen=function(){return console.log("ws opened")},r.current.onclose=function(){return console.log("ws closed")},r.current.onmessage=function(N){var u=N.data,i;try{i=JSON.parse(u)}catch(V){}i&&i.status==="done"?(P(i.history),L(""),I("")):i&&i.status==="begin"?I(i.question):(L(function(V){return V+u}),U(!1))};var v=r.current;return function(){v.close()}},[]);var ve=function(){var s=p()(d()().mark(function n(v){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:v.history=S,U(!0),console.log(r.current),r.current.readyState===1?r.current.send(JSON.stringify(v)):console.log("error, socket closed.");case 4:case"end":return u.stop()}},n)}));return function(v){return s.apply(this,arguments)}}(),he=function(n){console.log("Failed:",n)},ge=function(n){re(n),P([])},xe=[{label:"\u5C0F\u7EA2\u4E66",value:"redbook"},{label:"\u77E5\u4E4E",value:"zhihu"},{label:"\u5FAE\u535A",value:"weibo"},{label:"\u516C\u4F17\u53F7",value:"gongzhonghao"},{label:"\u70B9\u8BC4",value:"dianping"},{label:"\u5934\u6761",value:"toutiao"},{label:"\u503C\u5F97\u4E70",value:"zhidemai"},{label:"\u6296\u97F3",value:"douyin"},{label:"\u5FEB\u624B",value:"kuaishou"}],fe={margin:4,borderRadius:4,background:"#333",padding:5},me={prompt:"\u6C7D\u8F66",pattern:"redbook"};return(0,e.jsx)(Z._z,{waterMarkProps:{content:""},children:(0,e.jsx)("div",{style:{color:F.colorTextHeading},children:(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(a.Z,{span:8,children:(0,e.jsxs)(f.Z,{name:"basic",onFinish:ve,onFinishFailed:he,autoComplete:"off",layout:"vertical",initialValues:me,children:[(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u63CF\u8FF0",name:"prompt",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u7279\u6027\uFF0C\u63CF\u8FF0\u7B49\u5185\u5BB9!"}],children:(0,e.jsx)(Q.Z.TextArea,{showCount:!0,maxLength:500,placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7279\u6027\uFF0C\u63CF\u8FF0\u7B49\u5185\u5BB9!",allowClear:!0,style:{height:180}})}),(0,e.jsx)(f.Z.Item,{label:"\u98CE\u683C",name:"pattern",children:(0,e.jsx)(X.ZP.Group,{options:xe,onChange:ge,value:oe,optionType:"button",buttonStyle:"solid"})}),(0,e.jsx)(f.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(Y.ZP,{type:"primary",htmlType:"submit",disabled:W,children:"\u5F00\u59CB\u751F\u6210"})})]})}),(0,e.jsx)(a.Z,{span:1}),(0,e.jsx)(a.Z,{span:14,children:(0,e.jsx)("div",{style:{width:"100%",borderRadius:4,margin:8},children:(0,e.jsxs)("div",{style:fe,children:[S.length==0&&!O&&(0,e.jsx)("div",{children:"\u8F93\u5165\u60A8\u7684\u5546\u54C1\u63CF\u8FF0\u5F00\u59CB\u64B0\u5199\u6587\u6848\uFF0C\u6301\u7EED\u804A\u5929\u53EF\u4EE5\u8FDB\u884C\u4FEE\u6539\u3002"}),S.map(function(s){return(0,e.jsxs)("div",{style:{marginBottom:10},children:[(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(a.Z,{flex:"auto",style:{textAlign:"right",paddingLeft:60,margin:"8px 4px"},children:s[0]}),(0,e.jsx)(a.Z,{flex:"40px",style:{textAlign:"center"},children:(0,e.jsx)(m.C,{size:32,icon:(0,e.jsx)(E.Z,{})})})]}),(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(a.Z,{flex:"40px",style:{textAlign:"center"},children:(0,e.jsx)(m.C,{size:32,icon:(0,e.jsx)(A,{})})}),(0,e.jsx)(a.Z,{flex:"auto",style:{paddingRight:100,maxWidth:"90%"},children:s[1]})]})]},s)}),O&&(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(a.Z,{flex:"auto",style:{textAlign:"right",paddingLeft:60,margin:"8px 4px"},children:O}),(0,e.jsx)(a.Z,{flex:"40px",style:{textAlign:"center"},children:(0,e.jsx)(m.C,{size:32,icon:(0,e.jsx)(E.Z,{})})})]}),W?(0,e.jsx)("div",{children:(0,e.jsx)(_.Z,{})}):null,B&&(0,e.jsxs)(c.Z,{children:[(0,e.jsx)(a.Z,{flex:"40px",style:{textAlign:"center"},children:(0,e.jsx)(m.C,{size:32,icon:(0,e.jsx)(A,{})})}),(0,e.jsx)(a.Z,{flex:"auto",style:{paddingRight:100,maxWidth:"90%"},children:B})]})]})})})]})})})},te=ee}}]);
