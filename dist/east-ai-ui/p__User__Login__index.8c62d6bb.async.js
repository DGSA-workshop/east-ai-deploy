"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{11053:function(ge,L,a){a.r(L),a.d(L,{default:function(){return te}});var O=a(15009),g=a.n(O),z=a(97857),h=a.n(z),R=a(99289),x=a.n(R),$=a(5574),B=a.n($),W=a(99702),D=a(2618),t=a(35312);function E(p,l){return y.apply(this,arguments)}function y(){return y=x()(g()().mark(function p(l,d){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,t.request)("/api/login/captcha",h()({method:"GET",params:h()({},l)},d||{})));case 1:case"end":return v.stop()}},p)})),y.apply(this,arguments)}var G=a(88777),H=a(96833),V=a(97487),K=a(87547),Z=a(94149),Q=a(24454),w=a(82554),A=a(5966),J=a(16434),X=a(63434),S=a(28906),Y=a(38925),C=a(45360),k=a(48055),q=a(67610),T=a(67294),_=a(73935),e=a(85893),ee=function(){var l=(0,S.l)(function(d){var f=d.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:f.colorPrimaryActive}}});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{className:l},"AlipayCircleOutlined"),(0,e.jsx)(H.Z,{className:l},"TaobaoCircleOutlined"),(0,e.jsx)(V.Z,{className:l},"WeiboCircleOutlined")]})},ae=function(){var l=(0,S.l)(function(d){var f=d.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:f.borderRadius,":hover":{backgroundColor:f.colorBgTextHover}}});return(0,e.jsx)("div",{className:l,"data-lang":!0,children:t.SelectLang&&(0,e.jsx)(t.SelectLang,{})})},P=function(l){var d=l.content;return(0,e.jsx)(Y.Z,{style:{marginBottom:24},message:d,type:"error",showIcon:!0})},se=function(){var l=(0,T.useState)({}),d=B()(l,2),f=d[0],v=d[1],re=(0,T.useState)("account"),I=B()(re,2),M=I[0],ne=I[1],N=(0,t.useModel)("@@initialState"),F=N.initialState,ie=N.setInitialState,le=(0,S.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),n=(0,t.useIntl)(),ue=function(){var m=x()(g()().mark(function i(){var u,o;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,F==null||(u=F.fetchUserInfo)===null||u===void 0?void 0:u.call(F);case 2:o=s.sent,o&&(0,_.flushSync)(function(){ie(function(j){return h()(h()({},j),{},{currentUser:o})})});case 4:case"end":return s.stop()}},i)}));return function(){return m.apply(this,arguments)}}(),oe=function(){var m=x()(g()().mark(function i(u){var o,c,s,j;return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,D.x4)(h()(h()({},u),{},{type:M}));case 3:if(o=r.sent,o.status!=="ok"){r.next=12;break}return c=n.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),C.ZP.success(c),r.next=9,ue();case 9:return s=new URL(window.location.href).searchParams,t.history.push(s.get("redirect")||"/"),r.abrupt("return");case 12:console.log(o),v(o),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(0),j=n.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(r.t0),C.ZP.error(j);case 21:case"end":return r.stop()}},i,null,[[0,16]])}));return function(u){return m.apply(this,arguments)}}(),U=f.status,b=f.type;return(0,e.jsxs)("div",{className:le,children:[(0,e.jsx)(t.Helmet,{children:(0,e.jsxs)("title",{children:[n.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",q.Z.title]})}),(0,e.jsx)(ae,{}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(w.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:n.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(t.FormattedMessage,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(ee,{},"icons")],onFinish:function(){var m=x()(g()().mark(function i(u){return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,oe(u);case 2:case"end":return c.stop()}},i)}));return function(i){return m.apply(this,arguments)}}(),children:[(0,e.jsx)(k.Z,{activeKey:M,onChange:ne,centered:!0,items:[{key:"account",label:n.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},{key:"mobile",label:n.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})}]}),U==="error"&&b==="account"&&(0,e.jsx)(P,{content:n.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),M==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(K.Z,{})},placeholder:n.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(A.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(Z.Z,{})},placeholder:n.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),U==="error"&&b==="mobile"&&(0,e.jsx)(P,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),M==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Q.Z,{})},name:"mobile",placeholder:n.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(J.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Z.Z,{})},captchaProps:{size:"large"},placeholder:n.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(i,u){return i?"".concat(u," ").concat(n.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):n.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var m=x()(g()().mark(function i(u){var o;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,E({phone:u});case 2:if(o=s.sent,o){s.next=5;break}return s.abrupt("return");case 5:C.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return s.stop()}},i)}));return function(i){return m.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(X.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(t.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(W.Z,{})]})},te=se}}]);
